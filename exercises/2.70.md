## Exercise 2.70

The following eight-symbol alphabet with associated relative frequencies was
designed to efficiently encode the lyrics of 1950s rock songs. (Note that the
“symbols” of an “alphabet” need not be individual letters.)

```
A    2    NA  16
BOOM 1    SHA  3
GET  2    YIP  9
JOB  2    WAH  1
```

Use `generate-huffman-tree` ([Exercise 2.69](./2.69.md)) to generate a
corresponding Huffman tree, and use `encode` ([Exercise 2.68](./2.68.md)) to
encode the following message:

```
Get a job
Sha na na na na na na na na

Get a job
Sha na na na na na na na na

Wah yip yip yip yip
yip yip yip yip yip
Sha boom
```

How many bits are required for the encoding? What is the smallest number of bits
that would be needed to encode this song if we used a fixed-length code for the
eight-symbol alphabet?

## Solution

First we deinfe our variables:

```scheme
(define rock-tree
  (generate-huffman-tree '((a 2) (boom 1) (get 2) (job 2) (na 16) (sha 3) (yip 9) (wah 1))))

(define song
  '(get a job
    sha na na na na na na na na
    get a job
    sha na na na na na na na na
    wah yip yip yip yip
    yip yip yip yip yip
    sha boom))

(define encoded-song (encode song rock-tree))
```

Now we can check its values:

```
stklos> rock-tree
((leaf na 16) ((leaf yip 9) (((leaf a 2) ((leaf wah 1) (leaf boom 1) #0=(wah boom) 2) (a . #0#) 4) ((leaf sha 3) ((leaf job 2) (leaf get 2) #1=(job get) 4) #2=(sha . #1#) 7) #3=(a wah boom . #2#) 11) #4=(yip . #3#) 20) (na . #4#) 36)
stklos> encoded-song
(1 1 1 1 1 1 1 0 0 1 1 1 1 0 1 1 1 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 0 0 1 1 1 1 0 1 1 1 0 0 0 0 0 0 0 0 0 1 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 1 1 0 1 1 0 1 1)
stklos> (length encoded-song)
84
```

As we can se above, to encode the message we need 84 bits.

We can calculate the number of bits that would be needed to encode this song if
we were to use a fixed-length code:

Because we have 8 symbols in the alphabet, we can calculate how many bits we
need to represent 1 symbol:

$$
log_2{8} = 3 \text{ bits}
$$

Now we can check the number of symbols of the song:

```
stklos> (length song)
36
```

Thus, to represent this same song in fixed-length code, we would need:

$$
3 \times 36 = 108 \text{ bits}
$$

We can see that using variable-length saves us
$1 - 84/108 \approx 0,22 \approx 22\%$ storage.
